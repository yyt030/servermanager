{% extends 'base.html' %}

{% block  styles_extend %}
    <!-- DataTables CSS -->
    <link href="{{ url_for('static', filename='vendor/datatables/css/dataTables.bootstrap.css') }}"
          rel="stylesheet">
{% endblock %}

{% block page_wrapper %}
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="page-header">主机列表</h3>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <table width="100%" class="table table-striped table-bordered table-hover"
                               id="serverlist" data-toggle="table">
                        </table>
                        <!-- /.table-responsive -->
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>
    </div>
{% endblock %}

{% block scripts_extend %}
    <script src="{{ url_for('static',filename='vendor/datatables/js/jquery.dataTables.min.js') }}"></script>
    <script src="{{ url_for('static',filename='vendor/datatables/js/dataTables.bootstrap.min.js') }}"></script>

    <!-- Page-Level Demo Scripts - Tables - Use for reference -->
    <script>
        $(document).ready(function () {
            $('#serverlist').DataTable({
                responsive: true,
                //服务器后台分页
                serverSide: true,
                processing: true,
                ajax: {
                    url: '{{ url_for('site.serverlist_api') }}',
                    type: 'GET',
                    error: function () {
                        alert("服务器未正常响应，请重试");
                    }
                },
                "columns": [
                    {"data": "subproject", "title": "所属项目组", "defaultContent": ""},
                    {"data": "envinfo", "title": "环境", "defaultContent": ""},
                    {"data": "ip", "title": "ip", "defaultContent": ""},
                    {"data": "oslevel", "title": "操作系统版本", "defaultContent": ""},
                    {"data": "owner", "title": "机器所属人", "defaultContent": ""},
                    {
                        "data": null,
                        "title": "操作",
                        "defaultContent": '<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>' +
                        '<a href="#"><span class="glyphicon glyphicon-trash"></span></a>'
                    }
                ],
                "language": {
                    "sProcessing": "处理中...",
                    "sLengthMenu": "显示 _MENU_ 项结果",
                    "sZeroRecords": "没有匹配结果",
                    "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                    "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                    "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                    "sInfoPostFix": "",
                    "sSearch": "搜索:",
                    "sUrl": "",
                    "sEmptyTable": "表中数据为空",
                    "sLoadingRecords": "载入中...",
                    "sInfoThousands": ",",
                    "oPaginate": {
                        "sFirst": "首页",
                        "sPrevious": "上页",
                        "sNext": "下页",
                        "sLast": "末页"
                    },
                    "oAria": {
                        "sSortAscending": ": 以升序排列此列",
                        "sSortDescending": ": 以降序排列此列"
                    }
                }
            });
        })
        ;
    </script>
{% endblock %}